### Пример репликации СУБД postgres  
- Установить multipass (**оркестратор виртуальных машин**): https://snapcraft.io/install/multipass/ubuntu  
- Создать две виртуальные машины командами:  

> multipass launch -c 2 -m 2G -d 10G -n manager  
> multipass launch -c 2 -m 2G -d 10G -n vm-1  

- Проверить, что машины созданы следующей командой:

> multipass ls  

Сервер **vm-1** это рабочий сервер, а **manager** - главный сервер, управляющий будущим кластером. Если сервера не имеют статус Running, то попробуйте запустить их командой:  

> multipass start vm-1 manager  

**ВАЖНО! После окончания работы с виртуальными серверами лучше будет, если вы завершите их работу командой:**  

> multipass stop vm-1 manager  

**После перезагрузки вашего ПК, виртуальные сервера не будут запущены и не будут занимать ресурсы вашего ПК.**  

- Зайти на manager машину. Вход на manager машину:  

> multipass shell manager  

И установить на нем Docker (https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-20-04-ru). Тоже самое нужно сделать и на машине vm-1.

- Сменить пароль ubuntu пользователя, на пример на '123' (без кавычек). Имя пользователя виртуального сервера здесь  **ubuntu**:  

> sudo passwd ubuntu  

Придумайте пароль и подтвердите его. Он вам понадобится при выполнении **sudo** операций. Выйти из виртуальной машины можно, введя команду **exit** прямо в командной оболочке виртуальной машины.

- Настройка команды Docker без sudo. Команды по порядку (обратный слэш удалите):

> sudo usermod -aG docker ${USER}  
> su - ${USER}  
> sudo usermod -aG docker ubuntu  

Теперь команды докера должны вызываться без прав суперпользователя **sudo**
> docker ps

- На машине **manager** выполните инициализацию Docker Swarm кластера:  

> docker swarm init  

Завершить работу класетра и удалить его можно так:  ``docker swarm leave --force ``  


